(()=>{let e,t,n,o="Joinville",i=document.querySelector(".location-name"),a=document.querySelector(".avg-temp"),u=document.querySelector(".description"),r=document.querySelector(".feels-like"),m=document.querySelector(".max-temp"),c=document.querySelector(".min-temp"),s=document.querySelector(".humidity"),d=document.querySelector(".wind"),l=document.querySelector(".sunrise"),p=document.querySelector(".sunset"),x=(document.querySelector("form"),document.querySelector(".location-input")),y=document.querySelector(".submit-form"),C=document.querySelector(".unit");async function h(){await async function(){e=`http://api.openweathermap.org/data/2.5/weather?q=${o}&units=metric&APPID=ffa34782bdb5411f0f4c854704f8f566`,t=await(await fetch(e,{mode:"cors"})).json(),console.log(t),n={location:t.name,feelsLike:t.main.feels_like,humidity:t.main.humidity,pressure:t.main.pressure,avgTemp:t.main.temp,minTemp:t.main.temp_min,maxTemp:t.main.temp_max,country:t.sys.country,description:t.weather[0].description,wind:t.wind.speed,sunrise:new Date(1e3*t.sys.sunrise).toLocaleTimeString("default"),sunset:new Date(1e3*t.sys.sunset).toLocaleTimeString("default")},console.log(n)}(),async function(){i.textContent=`${n.location}, ${n.country}`,a.textContent=`${Math.round(n.avgTemp)}°`;const e=n.description.replace(/(^\w{1})|(\s+\w{1})/g,(e=>e.toUpperCase()));u.textContent=e,r.textContent=`Feels like ${Math.round(n.feelsLike)}°`,m.textContent=`Max ${Math.round(n.maxTemp)}°`,c.textContent=`Min ${Math.round(n.minTemp)}°`,s.textContent=`Humidity at ${n.humidity}%`,d.textContent=`Wind speed at ${n.wind} km/h`,l.textContent=`Sun rises at ${n.sunrise}`,p.textContent=`Sun sets at ${n.sunset}`}()}h(),y.addEventListener("click",(async e=>{o=x.value,e.preventDefault(),h(),x.value=""})),C.addEventListener("click",(()=>{"°C"===C.textContent?(C.textContent="°F",a.textContent=`${Math.round(9*n.avgTemp/5+32)}°`,r.textContent=`Feels like ${Math.round(9*n.feelsLike/5+32)}°`,m.textContent=`Max ${Math.round(9*n.maxTemp/5+32)}°`,c.textContent=`Min ${Math.round(9*n.minTemp/5+32)}°`):(C.textContent="°C",a.textContent=`${Math.round(n.avgTemp)}°`,r.textContent=`Feels like ${Math.round(n.feelsLike)}°`,m.textContent=`Max ${Math.round(n.maxTemp)}°`,c.textContent=`Min ${Math.round(n.minTemp)}°`)}))})();